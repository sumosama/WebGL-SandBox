<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <title>Cocos Creator | DigitalStampRally</title>

  <!--http://www.html5rocks.com/en/mobile/mobifying/-->
  <meta name="viewport"
        content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1,minimal-ui=true"/>

  <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">

  <!-- force webkit on 360 -->
  <meta name="renderer" content="webkit"/>
  <meta name="force-rendering" content="webkit"/>
  <!-- force edge on IE -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta name="msapplication-tap-highlight" content="no">

  <!-- force full screen on some browser -->
  <meta name="full-screen" content="yes"/>
  <meta name="x5-fullscreen" content="true"/>
  <meta name="360-fullscreen" content="true"/>

  <!--fix fireball/issues/3568 -->
  <!--<meta name="browsermode" content="application">-->
  <meta name="x5-page-mode" content="app">

  <!--<link rel="apple-touch-icon" href=".png" />-->
  <!--<link rel="apple-touch-icon-precomposed" href=".png" />-->

  <link rel="stylesheet" type="text/css" href="style.02f4a.css"/>

  <script src="./jsQR.084a8.js"></script>
  <script type="text/JavaScript">
  
  function startWebcam()
  {
      const video = document.getElementById("video");
      navigator.mediaDevices.getUserMedia({video: {facingMode: "environment"}, audio: false})
      .then((stream) =>
      {
          video.srcObject = stream;
          video.play();

      }).catch((e) =>
      {
          console.log(e);
          return false;
      });

      return true;
  }


  function stopWebcam()
  {
      const video = document.getElementById("video");
      let stream = video.srcObject;
      if (null != stream)
      {
          stream.getTracks().forEach(track => track.stop());
      }
  }


  function getWebcamImage()
  {
      if(video.readyState === video.HAVE_ENOUGH_DATA)
      {
          const video = document.getElementById("video");
          const canvas = document.getElementById("camera-canvas");
        const ctx = canvas.getContext('2d');
    canvas.height = video.videoHeight;
    canvas.width = video.videoWidth;
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    let img = ctx.getImageData(0, 0, canvas.width, canvas.height);
    let code = jsQR(img.data, img.width, img.height, {inversionAttempts: "dontInvert"});

          return [canvas.toDataURL(), video.videoWidth, video.videoHeight, code];
  }

      return [null, 0, 0, null];
  }

  </script>

</head>
<body>
  <div id="GameDiv" cc_exact_fit_screen="true">
      <div id="Cocos3dGameContainer">
          <canvas id="GameCanvas" oncontextmenu="event.preventDefault()" tabindex="99"></canvas>
      </div>
  </div>
  

<!-- Polyfills bundle. -->

<script src="src/polyfills.bundle.5adbf.js" charset="utf-8"> </script>


<!-- SystemJS support. -->
<script src="src/system.bundle.543e6.js" charset="utf-8"> </script>

<!-- Import map -->
<script src="src/import-map.d0058.json" type="systemjs-importmap" charset="utf-8"> </script>

<script>
    System.import('./index.7f585.js').catch(function(err) { console.error(err); })
</script>

  <div id="wrapper" style="display:none">
      <video id="video" autoplay muted playsinline></video>
      <canvas id="camera-canvas"></canvas>
  </div>
</body>
</html>
